{"version":3,"sources":["../../../../../nava-website/node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../../nava-website/node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../../nava-website/src/app/admin/movements/%5Bid%5D/page.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","\"use client\";\n\nimport { useEffect, useState, use } from \"react\";\nimport Link from \"next/link\";\nimport { useRouter } from \"next/navigation\";\nimport { doc, getDoc, setDoc, addDoc, collection } from \"firebase/firestore\";\nimport { db } from \"@/lib/firebase\";\nimport AdminGuard from \"@/components/admin/AdminGuard\";\n\nexport default function EditMovement({ params }: { params: Promise<{ id: string }> }) {\n    const router = useRouter();\n    const [loading, setLoading] = useState(true);\n    const [saving, setSaving] = useState(false);\n    const [formData, setFormData] = useState({\n        title: \"\",\n        date: \"\",\n        description: \"\",\n        imageUrl: \"\", // For now, we'll confirm storing URLs or if we add storage later\n    });\n\n    // Unwrap params using React.use()\n    const { id } = use(params);\n    const isNew = id === \"new\";\n\n    useEffect(() => {\n        if (!isNew) {\n            fetchMovement(id);\n        } else {\n            setLoading(false);\n        }\n    }, [id, isNew]);\n\n    const fetchMovement = async (movementId: string) => {\n        try {\n            const docRef = doc(db, \"movements\", movementId);\n            const docSnap = await getDoc(docRef);\n            if (docSnap.exists()) {\n                const data = docSnap.data();\n                setFormData({\n                    title: data.title || \"\",\n                    date: data.date || \"\",\n                    description: data.description || \"\",\n                    imageUrl: data.imageUrl || \"\",\n                });\n            }\n        } catch (error) {\n            console.error(\"Error fetching movement:\", error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setSaving(true);\n        try {\n            if (isNew) {\n                await addDoc(collection(db, \"movements\"), formData);\n            } else {\n                await setDoc(doc(db, \"movements\", id), formData);\n            }\n            router.push(\"/admin/movements\");\n        } catch (error) {\n            console.error(\"Error saving movement:\", error);\n            alert(\"Error saving movement. Check console.\");\n        } finally {\n            setSaving(false);\n        }\n    };\n\n    return (\n        <AdminGuard>\n            <div className=\"p-8 max-w-4xl mx-auto text-white\">\n                <div className=\"flex flex-col mb-8\">\n                    <Link href=\"/admin/movements\" className=\"text-zinc-500 hover:text-white mb-2 text-sm\">‚Üê Back to List</Link>\n                    <h1 className=\"text-4xl font-bold uppercase text-nava-green\">{isNew ? \"Create Movement\" : \"Edit Movement\"}</h1>\n                </div>\n\n                {loading ? (\n                    <div>Loading form...</div>\n                ) : (\n                    <form onSubmit={handleSubmit} className=\"flex flex-col gap-6 border border-zinc-800 bg-zinc-900/50 p-8\">\n                        <div className=\"flex flex-col gap-2\">\n                            <label className=\"text-sm font-bold uppercase text-zinc-400\">Title</label>\n                            <input\n                                type=\"text\"\n                                required\n                                value={formData.title}\n                                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                                className=\"p-3 bg-black border border-zinc-700 focus:border-nava-green outline-none text-white text-lg font-bold\"\n                            />\n                        </div>\n\n                        <div className=\"flex flex-col gap-2\">\n                            <label className=\"text-sm font-bold uppercase text-zinc-400\">Date (Display Text)</label>\n                            <input\n                                type=\"text\"\n                                required\n                                placeholder=\"e.g. 01.22.26\"\n                                value={formData.date}\n                                onChange={(e) => setFormData({ ...formData, date: e.target.value })}\n                                className=\"p-3 bg-black border border-zinc-700 focus:border-nava-green outline-none text-white font-mono\"\n                            />\n                        </div>\n\n                        <div className=\"flex flex-col gap-2\">\n                            <label className=\"text-sm font-bold uppercase text-zinc-400\">Image URL</label>\n                            <input\n                                type=\"text\"\n                                placeholder=\"https://...\"\n                                value={formData.imageUrl}\n                                onChange={(e) => setFormData({ ...formData, imageUrl: e.target.value })}\n                                className=\"p-3 bg-black border border-zinc-700 focus:border-nava-green outline-none text-white font-mono text-sm\"\n                            />\n                            <p className=\"text-xs text-zinc-600\">Enter a direct image link.</p>\n                        </div>\n\n                        <div className=\"flex flex-col gap-2\">\n                            <label className=\"text-sm font-bold uppercase text-zinc-400\">Description</label>\n                            <textarea\n                                rows={6}\n                                required\n                                value={formData.description}\n                                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                                className=\"p-3 bg-black border border-zinc-700 focus:border-nava-green outline-none text-white\"\n                            />\n                        </div>\n\n                        <div className=\"flex justify-end gap-4 mt-4\">\n                            <Link href=\"/admin/movements\" className=\"px-6 py-3 border border-zinc-700 text-white font-bold uppercase hover:bg-zinc-800 transition-colors\">\n                                Cancel\n                            </Link>\n                            <button\n                                type=\"submit\"\n                                disabled={saving}\n                                className=\"px-6 py-3 bg-nava-green text-black font-bold uppercase hover:bg-white transition-colors disabled:opacity-50\"\n                            >\n                                {saving ? \"Saving...\" : \"Save Movement\"}\n                            </button>\n                        </div>\n                    </form>\n                )}\n            </div>\n        </AdminGuard>\n    );\n}\n"],"names":["module","exports","require","vendored","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1]}